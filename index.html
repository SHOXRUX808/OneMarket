<!doctype html>

<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>OneMarket ‚Äî –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</title>
  <style>
    :root{
      --bg:#08090b;--card:#0b0c0e;--muted:#9aa3ad;--accent1:#00d084;--accent2:#2fd1ff;--text:#e6eef3;--input-bg:rgba(255,255,255,0.03);--radius:16px;--gap:12px;--touch-min:48px
    }
    html,body{height:100%;margin:0}
    body{
      background:linear-gradient(180deg,#050607 0%,#0f1113 100%);
      font-family:Inter,Segoe UI,Arial,sans-serif;color:var(--text);display:flex;align-items:flex-start;justify-content:center;padding:env(safe-area-inset-top) 16px env(safe-area-inset-bottom);
    }
    .card{width:920px;max-width:920px;margin:22px auto;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:18px;box-shadow:0 18px 60px rgba(2,6,23,0.8);padding:20px;border:1px solid rgba(255,255,255,0.03);display:flex;gap:18px;overflow:hidden}
    .left{width:220px;min-width:180px;display:flex;flex-direction:column;align-items:center;gap:12px;padding-top:6px}
    .right{flex:1}
    .logo-square{width:118px;height:118px;border-radius:14px;background:#000;display:flex;align-items:center;justify-content:center;box-shadow:0 10px 28px rgba(0,0,0,0.7),inset 0 1px 0 rgba(255,255,255,0.02)}
    h2{margin:6px 0 0 0;font-size:20px;font-weight:700;color:#fff;text-align:center}
    .subtitle{font-size:13px;color:var(--muted);margin-top:2px;text-align:center}
    .lang-row{position:absolute;right:12px;top:12px;display:flex;gap:8px;z-index:10}
    .lang-btn{background:transparent;border:1px solid rgba(255,255,255,0.05);color:var(--muted);padding:6px 10px;border-radius:10px;font-weight:700;cursor:pointer;font-size:12px}
    .lang-btn.active{background:linear-gradient(90deg,var(--accent2),var(--accent1));color:#021;border:none;box-shadow:0 8px 22px rgba(46,189,167,0.12)}
    .form{padding:0 2px}
    label{display:block;font-weight:600;margin-top:12px;font-size:14px;color:var(--text)}
    input[type=text],input[type=tel],select,textarea,input[type=file]{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);font-size:15px;background:var(--input-bg);color:#fff;box-sizing:border-box;margin-top:8px;outline:none}
    textarea{min-height:130px;resize:vertical;padding-top:10px}
    .row{display:flex;gap:12px}
    .small{width:50%}
    .note{font-size:13px;color:var(--muted);margin-top:10px}
    .preview-grid{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .preview-item{width:120px;height:80px;border-radius:8px;overflow:hidden;border:1px solid rgba(255,255,255,0.04);display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.02)}
    .preview-item img,.preview-item video{width:100%;height:100%;object-fit:cover}
    .buttons{display:flex;gap:10px;margin-top:16px}
    .btn{flex:1;padding:14px;border-radius:12px;border:none;cursor:pointer;font-weight:800;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#021;font-size:16px;box-shadow:0 10px 30px rgba(46,189,167,0.12);min-height:var(--touch-min)}
    .btn:disabled{opacity:.6;cursor:default}
    .status{margin-top:12px;font-size:14px;color:var(--muted);min-height:22px}
    @media (max-width:820px){.card{width:100%;max-width:100%;margin:12px 0;flex-direction:column;gap:10px;padding:14px;border-radius:14px}.left{width:100%;flex-direction:row;gap:14px;padding:6px 2px 0 2px}.logo-square{width:86px;height:86px}h2{font-size:18px;text-align:left}.row{flex-direction:column}.small{width:100%}.buttons{display:none}#mobileSendBtn{display:block;position:fixed;left:12px;right:12px;bottom:calc(12px + env(safe-area-inset-bottom));z-index:1200}}</style>
</head>
<body>
  <div class="card" role="main" aria-labelledby="brand-title">
    <div class="lang-row" aria-hidden="false">
      <button class="lang-btn" id="btn-ru" aria-label="–†—É—Å—Å–∫–∏–π">RU</button>
      <button class="lang-btn active" id="btn-uz" aria-label="O'zbek">UZ</button>
      <button class="lang-btn" id="btn-en" aria-label="English">EN</button>
    </div><div class="left" aria-hidden="false">
  <div class="logo-square" aria-hidden="true">
    <!-- –ª–æ–≥–æ—Ç–∏–ø ‚Äî —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ —É–ø—Ä–æ—â—ë–Ω–Ω–æ–π —Ñ–æ—Ä–º–µ -->
    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" width="80" height="80" aria-hidden="true">
      <defs><linearGradient id="g1" x1="0" x2="1" y1="0" y2="1"><stop offset="0%" stop-color="#00d084"/><stop offset="55%" stop-color="#16c1d8"/><stop offset="100%" stop-color="#4a6bff"/></linearGradient></defs>
      <path d="M50 8 C70 8 86 22 88 44 C86 62 70 82 50 86 C30 82 14 62 12 44 C14 22 30 8 50 8 Z" fill="url(#g1)"/>
    </svg>
  </div>
  <div style="flex:1;">
    <h2 id="brand-title">OneMarket</h2>
    <div class="subtitle" id="brand-sub">E'lon yuborish</div>
  </div>
</div>

<div class="right">
  <form class="form" id="mainForm" onsubmit="event.preventDefault(); sendAnnouncement();" aria-describedby="note-required">
    <label id="label-title" for="title">E'lon sarlavhasi *</label>
    <input id="title" name="title" type="text" placeholder="Masalan: 2 xonali kvartira, markaz" required />

    <label id="label-category" for="category">Toifa *</label>
    <select id="category" name="category" required>
      <option value="">Toifani tanlang...</option>
    </select>

    <label id="label-description" for="description">Tavsif</label>
    <textarea id="description" name="description" placeholder="E'lonni batafsil yozing (holat, shartlar, kontaktlar va h.k.)"></textarea>

    <div class="row">
      <div class="small">
        <label id="label-price" for="price">Narxi (agar mavjud bo'lsa)</label>
        <input id="price" name="price" type="text" inputmode="numeric" placeholder="Masalan: 250000000" />
      </div>
      <div class="small">
        <label id="label-region" for="region">Joylashuv</label>
        <select id="region" name="region"><option value="">Tumanni tanlang...</option></select>
      </div>
    </div>

    <label id="label-phone" for="phone">Kontakt telefoni *</label>
    <input id="phone" name="phone" type="tel" placeholder="+998..." required inputmode="tel" />

    <label id="label-phone2" for="phone2">Zaxira telefon</label>
    <input id="phone2" name="phone2" type="tel" placeholder="+998..." inputmode="tel" />

    <label id="label-extra" for="extra">Qo'shimcha ma'lumot</label>
    <input id="extra" name="extra" type="text" placeholder="Masalan: Gazdan ajratilgan, torim bor" />

    <label id="label-photo" for="media">Rasm / Video (bir yoki bir nechta)</label>
    <input id="media" name="media" type="file" accept="image/*,video/*" multiple />
    <div id="previewGrid" class="preview-grid" aria-live="polite"></div>

    <div class="note" id="note-required">Yulduzcha (*) bilan belgilangan maydonlar majburiy.</div>

    <div class="buttons">
      <button class="btn" id="sendBtnDesktop" type="button" onclick="sendAnnouncement()">üì® Yuborish</button>
    </div>

    <div id="status" class="status" role="status" aria-live="polite"></div>
  </form>
</div>

  </div><button id="mobileSendBtn" class="btn" style="display:none" aria-hidden="true" onclick="sendAnnouncement()">üì® Yub–æ—Äish</button>

  <script>
    // Bot config (–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ)
    const botToken = "8273823253:AAGCc8_q358pTkYl-Ze4zvdorsxrzKl3WJw";
    const chatId = "-1003657683006";

    // –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (RU/EN/UZ)
    const translations = {
      ru: { brandTitle:"OneMarket",brandSub:"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ",labels:{title:"–ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏—è *",title_ph:"–ö—Ä–∞—Ç–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–Ω–∞–ø—Ä.: 2-–∫–∫–≤, —Ü–µ–Ω—Ç—Ä)",category_ph:"–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é...",description:"–û–ø–∏—Å–∞–Ω–∏–µ",description_ph:"–û–ø–∏—à–∏—Ç–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ (—Å–æ—Å—Ç–æ—è–Ω–∏–µ, —É—Å–ª–æ–≤–∏—è, –∫–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Ç.–¥.)",price:"–¶–µ–Ω–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)",region_ph:"–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–π–æ–Ω...",phone:"–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω *",phone_ph:"+998...",phone2:"–ó–∞–ø–∞—Å–Ω–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω",extra:"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è",photo:"–§–æ—Ç–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)",note:"–ü–æ–ª—è, –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ –∑–≤–µ–∑–¥–æ—á–∫–æ–π (*), –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è.",sendBtn:"üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å",sending:"–û—Ç–ø—Ä–∞–≤–∫–∞...",requiredMsg:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (–ó–∞–≥–æ–ª–æ–≤–æ–∫, –ö–∞—Ç–µ–≥–æ—Ä–∏—è, –¢–µ–ª–µ—Ñ–æ–Ω).",ok_photo:"‚úÖ –û–±—ä—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ (—Å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ).",ok_text:"‚úÖ –û–±—ä—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ (—Ç–µ–∫—Å—Ç).",error_send:"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: "},categories:["–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å","–†–∞–±–æ—Ç–∞","–ê–≤—Ç–æ","–£—Å–ª—É–≥–∏","–¢–æ–≤–∞—Ä—ã","–û–±—É—á–µ–Ω–∏–µ"],regions:["–ß–∏–ª–∞–Ω–∑–∞—Ä","–Æ–Ω—É—Å–∞–±–∞–¥","–ú–∏—Ä–∑–æ-–£–ª—É–≥–±–µ–∫","–Ø—à–Ω–∞–±–∞–¥","–Ø–∫–∫–∞—Å–∞—Ä–∞–π","–°–µ—Ä–≥–µ–ª–∏","–£—á—Ç–µ–ø–∞","–ê–ª–º–∞–∑–∞—Ä","–î—Ä—É–≥–æ–π —Ä–µ–≥–∏–æ–Ω"]},
      en: { brandTitle:"OneMarket",brandSub:"Send announcement",labels:{title:"Ad title *",title_ph:"Short title (e.g.: 2-room apt, center)",category_ph:"Select category...",description:"Description",description_ph:"Describe the ad in detail (condition, terms, contacts, etc.)",price:"Price (if applicable)",region_ph:"Select district...",phone:"Contact phone *",phone_ph:"+998...",phone2:"Backup phone",extra:"Additional info",photo:"Photo (recommended)",note:"Fields marked with * are required.",sendBtn:"üì® Send",sending:"Sending...",requiredMsg:"Please fill required fields (Title, Category, Phone).",ok_photo:"‚úÖ Announcement sent (with photo/video).",ok_text:"‚úÖ Announcement sent (text).",error_send:"Send error: "},categories:["Real Estate","Jobs","Auto","Services","Goods","Education"],regions:["Chilanzar","Yunusabad","Mirzo-Ulug'bek","Yashnobod","Yakkasaray","Sergeli","Uchtepa","Almazar","Other region"]},
      uz: { brandTitle:"OneMarket",brandSub:"E'lon yuborish",labels:{title:"E'lon sarlavhasi *",title_ph:"Qisqa sarlavha (masalan: 2 xonali kvartira, markaz)",category_ph:"Toifani tanlang...",description:"Tavsif",description_ph:"E'lonni batafsil yozing (holat, shartlar, kontaktlar va h.k.)",price:"Narxi (agar mavjud bo'lsa)",region_ph:"Tumanni tanlang...",phone:"Kontakt telefoni *",phone_ph:"+998...",phone2:"Zaxira telefon",extra:"Qo'shimcha ma'lumot",photo:"Rasm (tavsiya etiladi)",note:"Yulduzcha (*) bilan belgilangan maydonlar majburiy.",sendBtn:"üì® Yuborish",sending:"Yuborilmoqda...",requiredMsg:"Iltimos, majburiy maydonlarni to'ldiring (Sarlavha, Toifa, Telefon).",ok_photo:"‚úÖ E'lon muvaffaqiyatli yuborildi (rasm/ video bilan).",ok_text:"‚úÖ E'lon muvaffaqiyatli yuborildi (matn).",error_send:"Yuborishda xato: "},categories:["Ko'chmas mulk","Ish o'rinlari","Avto","Xizmatlar","Mahsulotlar","Ta'lim"],regions:["Chilonzor","Yunusobod","Mirzo-Ulug'bek","Yashnobod","Yakkasaroy","Sergeli","Uchtepa","Almazar","Boshqa"]}
    };

    let currentLang = 'uz';

    function escapeHtml(str){ if(!str) return ''; return String(str).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;'); }
    function setStatus(text,isError=false){ const s=document.getElementById('status'); s.textContent = text||''; s.style.color = isError ? '#ff6b6b' : '#6ef1c8'; }

    function populateOptions(lang){ const cat=document.getElementById('category'), reg=document.getElementById('region'); cat.length=0; reg.length=0; const t=translations[lang]; const opt0=document.createElement('option'); opt0.value=''; opt0.textContent = t.labels.category_ph; cat.appendChild(opt0); t.categories.forEach(v=>{ const o=document.createElement('option'); o.value=v; o.textContent=v; cat.appendChild(o); }); const r0=document.createElement('option'); r0.value=''; r0.textContent = t.labels.region_ph; reg.appendChild(r0); t.regions.forEach(v=>{ const o=document.createElement('option'); o.value=v; o.textContent=v; reg.appendChild(o); }); }

    function applyTranslations(lang){ const t=translations[lang].labels; document.getElementById('brand-title').textContent = translations[lang].brandTitle; document.getElementById('brand-sub').textContent = translations[lang].brandSub; document.getElementById('label-title').textContent = t.title; document.getElementById('title').placeholder = t.title_ph; document.getElementById('label-category').textContent = (lang==='uz')? 'Toifa *' : (lang==='ru')? '–ö–∞—Ç–µ–≥–æ—Ä–∏—è *' : 'Category *'; document.getElementById('label-description').textContent = t.description; document.getElementById('description').placeholder = t.description_ph; document.getElementById('label-price').textContent = t.price; document.getElementById('label-region').textContent = t.region_ph; document.getElementById('label-phone').textContent = t.phone; document.getElementById('phone').placeholder = t.phone_ph; document.getElementById('label-phone2').textContent = t.phone2; document.getElementById('phone2').placeholder = t.phone_ph; document.getElementById('label-extra').textContent = t.extra; document.getElementById('label-photo').textContent = t.photo; document.getElementById('note-required').textContent = t.note; document.getElementById('sendBtnDesktop').textContent = t.sendBtn; document.getElementById('mobileSendBtn').textContent = t.sendBtn; setStatus(''); }

    document.getElementById('btn-ru').addEventListener('click',()=>setLanguage('ru')); document.getElementById('btn-en').addEventListener('click',()=>setLanguage('en')); document.getElementById('btn-uz').addEventListener('click',()=>setLanguage('uz'));

    function setLanguage(lang){ currentLang = lang; applyTranslations(lang); populateOptions(lang); document.querySelectorAll('.lang-btn').forEach(b=>b.classList.remove('active')); const el=document.getElementById('btn-'+lang); if(el) el.classList.add('active'); }

    // Media preview
    const mediaInput = document.getElementById('media'); const previewGrid = document.getElementById('previewGrid');
    mediaInput.addEventListener('change', ()=>{
      previewGrid.innerHTML=''; const files = Array.from(mediaInput.files||[]);
      if(files.length===0) return;
      files.forEach(f=>{ const item=document.createElement('div'); item.className='preview-item'; if(f.type.startsWith('image/')){ const img=document.createElement('img'); img.src = URL.createObjectURL(f); img.alt = f.name; item.appendChild(img); } else if(f.type.startsWith('video/')){ const vid=document.createElement('video'); vid.src = URL.createObjectURL(f); vid.setAttribute('muted',''); vid.setAttribute('playsinline',''); vid.addEventListener('loadeddata', ()=>{ try{vid.pause();}catch(e){} }); item.appendChild(vid); } else { const txt=document.createElement('div'); txt.textContent=f.name; item.appendChild(txt);} previewGrid.appendChild(item); });
    });

    function resetForm(){ document.getElementById('title').value=''; document.getElementById('category').value=''; document.getElementById('description').value=''; document.getElementById('price').value=''; document.getElementById('region').value=''; document.getElementById('phone').value=''; document.getElementById('phone2').value=''; document.getElementById('extra').value=''; mediaInput.value=''; previewGrid.innerHTML=''; }

    async function sendAnnouncement(){ const t = translations[currentLang].labels; const sendBtnDesktop = document.getElementById('sendBtnDesktop'); const mobileBtn = document.getElementById('mobileSendBtn'); if(sendBtnDesktop) sendBtnDesktop.disabled=true; if(mobileBtn) mobileBtn.disabled=true; setStatus(t.sending);
      try{
        const title = document.getElementById('title').value.trim(); const category = document.getElementById('category').value; const description = document.getElementById('description').value.trim(); const price = document.getElementById('price').value.trim(); const region = document.getElementById('region').value; const phone = document.getElementById('phone').value.trim(); const phone2 = document.getElementById('phone2').value.trim(); const extra = document.getElementById('extra').value.trim(); const files = Array.from(mediaInput.files||[]);
        if(!title || !category || !phone){ setStatus(t.requiredMsg,true); if(sendBtnDesktop) sendBtnDesktop.disabled=false; if(mobileBtn) mobileBtn.disabled=false; return; }
        const headerLine = (currentLang==='ru')? '<b>üì£ –ù–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ ‚Äî OneMarket</b>' : (currentLang==='en')? '<b>üì£ New announcement ‚Äî OneMarket</b>' : '<b>üì£ Yangi e\'lon ‚Äî OneMarket</b>';
        const lines=[]; lines.push(headerLine); lines.push(`<b>üè∑Ô∏è ${escapeHtml((currentLang==='ru')?t.title:(currentLang==='en')?t.title:t.title)}:</b> ${escapeHtml(title)}`); lines.push(`<b>üìÇ ${escapeHtml((currentLang==='ru')? '–ö–∞—Ç–µ–≥–æ—Ä–∏—è' : (currentLang==='en')? 'Category' : 'Toifa')}:</b> ${escapeHtml(category)}`); lines.push(`<b>üìù ${escapeHtml(t.description)}:</b> ${escapeHtml(description||'‚Äî')}`); lines.push(`<b>üí∞ ${escapeHtml(t.price)}:</b> ${escapeHtml(price||'‚Äî')}`); lines.push(`<b>üìç ${escapeHtml((currentLang==='ru')? '–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ' : (currentLang==='en')? 'Location' : 'Joylashuv')}:</b> ${escapeHtml(region||'‚Äî')}`); lines.push(`<b>üìû ${escapeHtml(t.phone)}:</b> ${escapeHtml(phone)}`); lines.push(`<b>‚òéÔ∏è ${escapeHtml(t.phone2)}:</b> ${escapeHtml(phone2||'‚Äî')}`); lines.push(`<b>‚ÑπÔ∏è ${escapeHtml(t.extra||translations[currentLang].labels.extra)}:</b> ${escapeHtml(extra||'‚Äî')}`);
        const captionText = lines.join('\n');

        if(files.length===0){ const url = `https://api.telegram.org/bot${botToken}/sendMessage`; const payload={chat_id:chatId,text:captionText,parse_mode:'HTML'}; const res = await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)}); const json = await res.json(); if(json.ok){ setStatus(t.ok_text); resetForm(); } else { setStatus(t.error_send + (json.description || 'unknown'), true); }
        } else if(files.length===1){ const f=files[0]; const fd=new FormData(); fd.append('chat_id',chatId); fd.append((f.type.startsWith('image/'))? 'photo' : 'video', f); fd.append('caption', captionText); fd.append('parse_mode','HTML'); const url = `https://api.telegram.org/bot${botToken}/${f.type.startsWith('image/')? 'sendPhoto' : 'sendVideo'}`; const res = await fetch(url,{method:'POST',body:fd}); const json = await res.json(); if(json.ok){ setStatus(t.ok_photo); resetForm(); } else { setStatus(t.error_send + (json.description || 'unknown'), true); }
        } else {
          // multiple files: prepare media array and attach files up to 10
          const fd = new FormData(); fd.append('chat_id',chatId);
          const mediaArr = files.slice(0,10).map((f,idx)=>{
            const name = `file${idx}`; fd.append(name, f, f.name); const type = f.type.startsWith('video/') ? 'video' : 'photo'; const obj = { type: type, media: `attach://${name}` }; if(idx===0){ obj.caption = captionText; obj.parse_mode = 'HTML'; } return obj;
          });
          fd.append('media', JSON.stringify(mediaArr));
          const url = `https://api.telegram.org/bot${botToken}/sendMediaGroup`;
          const res = await fetch(url,{method:'POST',body:fd}); const json = await res.json(); if(json.ok){ setStatus(t.ok_photo); resetForm(); } else { setStatus(t.error_send + (json.description || 'unknown'), true); }
        }

      } catch(err){ setStatus(err.message || 'Error', true); } finally { if(sendBtnDesktop) sendBtnDesktop.disabled=false; if(mobileBtn) mobileBtn.disabled=false; }
    }

    function updateMobileButton(){ const mobileBtn=document.getElementById('mobileSendBtn'); const desktopButtons=document.querySelector('.buttons'); if(window.matchMedia('(max-width:820px)').matches){ mobileBtn.style.display='block'; mobileBtn.setAttribute('aria-hidden','false'); if(desktopButtons) desktopButtons.style.display='none'; } else { mobileBtn.style.display='none'; mobileBtn.setAttribute('aria-hidden','true'); if(desktopButtons) desktopButtons.style.display='flex'; }}

    window.addEventListener('DOMContentLoaded', ()=>{ setLanguage(currentLang); updateMobileButton(); window.addEventListener('resize', updateMobileButton); window.addEventListener('orientationchange', updateMobileButton); });
  </script></body>
</html>